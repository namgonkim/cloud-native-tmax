# 클라우드 개발자 양성과정


## 데브옵스 이해와 CI/CD, 빌드 및 테스트
* CI/CD


## CI/CD
* 만들어진 war파일을 도커에 배포할건데 도커가 설치된 host를 준비
1. war파일 생성
2. war파일을 가지고 이미지로 build
    - tomcat + war file
3. 해당 이미지로 docker를 run

```
docker run -d -p 8081:8080 --rm --name cicd-project namgonkim/cicd-project:latest
```
### 에러
* tomcat:9.0.53-jre11-openjdk 로 사용할 것.

### aws
```
docker build -t cicd-project:1.0 -f Dockerfile .;
docker stop mytomcat;
docker run -d -p 8080:8080 --rm --name mytomcat cicd-project:1.0
```

### k8s 배포

1. hub.docker.com에서 Docker image Push(등록)
    - docker buildx build --platform linux/amd64,linux/arm64 -t namgonkim/cicd-project:2.0 -f Dockerfile . --push
    - (docker push)
    - jenkins item1 -> docker registry에 등록하기 위한 것

jenkins item2 -> k8s에 배포
2. pod 생성 (deployment)
    - k8s script 작성 (+ service + ingress)
    - (dockerfile을 이용해서 컨테이너 생성)
    - docker image(도커허브)를 가지고 컨테이너 생성
    

3. AWS의 ec2
    - skuser18-k8s-manager에 2번의 script(k8s script) 복사

4. jenkins에서 skuser18-k8s-manager에 저장 된 script를 실행